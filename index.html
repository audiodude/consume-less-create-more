<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
	<head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<title>Consume Less. Create More.</title>
		<!--//
                                                _
                                               | |
      ___ ___  _ __  ___ _   _ _ __ ___   ___  | | ___  ___ ___
     / __/ _ \| '_ \/ __| | | | '_ ` _ \ / _ \ | |/ _ \/ __/ __|
    | (_| (_) | | | \__ \ |_| | | | | | |  __/ | |  __/\__ \__ \_
     \___\___/|_| |_|___/\__,_|_| |_| |_|\___| |_|\___||___/___(_)
                         _
                        | |
      ___ _ __ ___  __ _| |_ ___   _ __ ___   ___  _ __ ___
     / __| '__/ _ \/ _` | __/ _ \ | '_ ` _ \ / _ \| '__/ _ \
    | (__| | |  __/ (_| | ||  __/ | | | | | | (_) | | |  __/_
     \___|_|  \___|\__,_|\__\___| |_| |_| |_|\___/|_|  \___(_)


      This site exists to inspire you to create. Take what you want of it.
      Create More.

      [ http://github.com/jmhobbs/consume-less-create-more ]

      Copyright (c) 2010 John Hobbs <john@velvetcache.org>

      Permission is hereby granted, free of charge, to any person obtaining a copy
      of this software and associated documentation files (the "Software"), to deal
      in the Software without restriction, including without limitation the rights
      to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
      copies of the Software, and to permit persons to whom the Software is
      furnished to do so, subject to the following conditions:

      The above copyright notice and this permission notice shall be included in
      all copies or substantial portions of the Software.

      THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
      IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
      FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
      AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
      LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
      OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
      THE SOFTWARE.


     //-->
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
		<script type="text/javascript">
			var CLCM = {

				// These are the various jQuery objects we will use
				box: null,
				quote: null,
				effect: null,
				sayer: null,
				link_box: null,
				body: null,
				play_pause: null,
				
				// Timer to debounce window resize events
				debounce_resize: null,
				// Timer for fading the controls
				control_fader: null,
				// Flags to get the state of the controls and avoid queuing excess effects
				control_fading_in: false,
				control_faded_in: false,
				// A token that is generated per load of the page. To help avoid re-showing quotes.
				token: "",
				// The timer until the next quote is fetched. Used for play/pause
				quote_timer: null,

				// Initialize all of our jQuery objects and set up events
				init: function () {
					CLCM.token = Math.random();
					CLCM.box = $( "#quote-box" );
					CLCM.quote = $( "#quote" );
					CLCM.effect = $( "#effect-wrapper" );
					CLCM.sayer = $( "#sayer" );
					CLCM.body = $( "body" );
					CLCM.play_pause = $( "#play-pause" );
					CLCM.link_box = $( "#link-box" );
					
					CLCM.link_box.hide();
					
					CLCM.play_pause.bind( 'click', CLCM.change_state );
					
					$( window ).bind( 'resize', CLCM.window_resize ).trigger( 'resize' ).bind( 'mousemove', CLCM.window_mousemove );
					CLCM.quote_timer = setTimeout( CLCM.fresh_quote, 2500 );
				},

				// On a window resize event, set up the debouncing
				window_resize: function () {
					if( CLCM.debounce_resize ) { clearTimeout( CLCM.debounce_resize ); }
					CLCM.debounce_resize = setTimeout( CLCM.reposition, 50 );
				},

				// On a window mouse move event, show the controls if needed
				window_mousemove: function () {
					if( CLCM.control_fader ) { clearTimeout( CLCM.control_fader ); }
					CLCM.control_fader = setTimeout( CLCM.fade_controls, 2500 );
					
					if( CLCM.control_fading_in && CLCM.link_box.is( ':animated' ) )
						return;

					if( CLCM.control_faded_in )
						return;

					CLCM.control_fading_in = true;
					CLCM.control_faded_in = false;

					CLCM.link_box.fadeIn( 'fast', function () { CLCM.control_faded_in = true; } );
				},
				
				// Fade the controls back out
				fade_controls: function () {
					CLCM.control_faded_in = false;
					CLCM.control_fading_in = false;
					CLCM.link_box.stop().fadeOut( 'fast' );
				},

				// Reposition the quote box after a debounced resize event
				reposition: function () {
					_height = CLCM.body.height();
					_width = CLCM.body.width();
					CLCM.box.animate(
						{
							left: ( _width - 750 ) / 2 + 'px',
							top: ( _height - 550 ) / 2 + 'px'
						}, 'fast' );
				},

				// Fetch a fresh quote and display it
				fresh_quote: function () {
					$.getJSON(
						'quote.json',
						{
							token: CLCM.token
						},
						function ( data ) {
							CLCM.effect.fadeOut(
								function () {
									CLCM.quote.empty();
									CLCM.quote.append( data.quote );
									CLCM.sayer.empty();
									if( null != data.link ) {
										sayer = $('<a href="' + data.link + '" target="_blank">' + data.sayer + '</a>' );
									}
									else {
										sayer = data.sayer;
									}
									CLCM.sayer.append( sayer );
									CLCM.effect.fadeIn(
										function () {
											if( false != CLCM.quote_timer )
												CLCM.quote_timer = setTimeout( CLCM.fresh_quote, 10000 );
										}
									);
								}
							);
						}
					);
				},
				
				// Play/Pause the page
				change_state: function () {
					if( false == CLCM.quote_timer ) {
						CLCM.play_pause.text( 'pause' );
						CLCM.quote_timer = null;
						CLCM.fresh_quote();
					}
					else {
						CLCM.play_pause.text( 'play' );
						if( CLCM.quote_timer ) {
							clearTimeout( CLCM.quote_timer );
							CLCM.quote_timer = false;
						}
					}
				},
			}

			$( CLCM.init );

		</script>
		<style type="text/css">
			html, body {
				height: 100%;
				margin: 0;
				padding: 0;
				overflow: hidden;
			}
			a {
				text-decoration: none;
				color: #444;
			}
			#quote-box {
				background: url(background.gif) no-repeat;
				height: 250px;
				width: 550px;
				position: absolute;
				padding: 150px 100px;
				font-family: Helvetica, Geneva, Arial, sans-serif;
				font-size: 30px;
				display: inline-block;
				text-shadow: 0 2px 3px #AAAAAA;
			}
			#sayer {
				font-weight: bold;
				position: absolute;
				bottom: 50px;
				right: 200px;
			}
			#link-box {
				position: absolute;
				right: 10px;
				bottom: 10px;
				z-index: 5;
				font-family: Helvetica, Geneva, Arial, sans-serif;
				font-size: 10px;
			}
		</style>
	</head>
	<body>
		<div id="link-box">
			<a href="#" id="play-pause">pause</a> - 
			<a href="README.markdown" target="_blank">about</a> -
			<a href="http://github.com/jmhobbs/consume-less-create-more" target="_blank">fork me</a>
		</div>
		<div id="quote-box">
			<div id="effect-wrapper">
				<div id="quote">
					<div style="font-size: 60px; padding-top: 50px; padding-left: 50px;">
					<span style="color: #F00;">CONSUME LESS</span><br/>
					CREATE MORE
					</div>
				</div>
				<div id="sayer"></div>
			</div>
		</div>
	</body>
</html>